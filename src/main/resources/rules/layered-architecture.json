{
    "ruleId": "LAYERED_ARCHITECTURE_VIOLATION",
    "severity": "ERROR",
    "description": "Service layer must not depend on Web/Controller layer",
    "query": {
        "type": "graph_traversal",
        "graph": "call_graph",
        "pattern": {
            "start": {
                "element": "method",
                "namePattern": ".*Service.*"
            },
            "traverse": {
                "edge": "calls",
                "maxDepth": 5
            },
            "target": {
                "mustNotReach": [
                    {
                        "attribute": "name",
                        "pattern": ".*Controller.*"
                    }
                ]
            }
        }
    },
    "violation": {
        "message": "Service method {method} calls Controller method {target}",
        "location": "method"
    }
}